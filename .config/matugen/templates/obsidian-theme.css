/* Matugen Obsidian Theme
   Dynamically generates colors based on your wallpaper (Light/Dark)
*/

body {
    /* --- ACCENT COLORS (HSL calculations for internal Obsidian use) --- */
    --accent-h: {{colors.primary.default.hue}};
    --accent-s: {{colors.primary.default.saturation}}%;
    --accent-l: {{colors.primary.default.lightness}}%;

    /* --- TEXT --- */
    --text-normal: {{colors.on_surface.default.hex}};
    --text-muted: {{colors.on_surface_variant.default.hex}};
    --text-faint: {{colors.outline.default.hex}};
    --text-on-accent: {{colors.on_primary.default.hex}};

    /* --- BACKGROUNDS --- */
    --background-primary: {{colors.surface.default.hex}};
    --background-secondary: {{colors.surface_container.default.hex}};
    --background-secondary-alt: {{colors.surface_container_high.default.hex}};
    
    --background-modifier-hover: {{colors.surface_container_highest.default.hex}};
    --background-modifier-active-hover: {{colors.surface_container_high.default.hex}};
    --background-modifier-border: {{colors.outline_variant.default.hex}};

    /* --- UI ELEMENTS --- */
    --ribbon-background: {{colors.surface_container_low.default.hex}};
    --divider-color: {{colors.outline_variant.default.hex}};
    
    --nav-item-color: {{colors.on_surface_variant.default.hex}};
    --nav-item-color-active: {{colors.primary.default.hex}};
    --nav-item-background-active: {{colors.primary_container.default.hex}};

    --tab-text-color-focused-active: {{colors.primary.default.hex}};
    --tab-text-color-active: {{colors.on_surface.default.hex}};
    
    --interactive-accent: {{colors.primary.default.hex}};
    --interactive-accent-hover: {{colors.primary_fixed.default.hex}};
    
    /* --- HEADERS --- */
    --h1-color: {{colors.primary.default.hex}};
    --h2-color: {{colors.secondary.default.hex}};
    --h3-color: {{colors.tertiary.default.hex}};
    --h4-color: {{colors.primary.default.hex}};
    --h5-color: {{colors.secondary.default.hex}};
    --h6-color: {{colors.tertiary.default.hex}};
}

/* =================================================================
   HOME PAGE INTEGRATION 
   Overrides the variables in your Home.css with wallpaper colors
   ================================================================= */
.home, .Home {
    /* "Highlight" -> Primary Accent */
    --highlight: {{colors.primary.default.hex}};
    
    /* "Primary" -> Secondary/Tertiary (for contrast) */
    --primary: {{colors.tertiary.default.hex}};
    
    /* "Dark" -> The background color (White in light mode, Black in dark mode) */
    --dark: {{colors.surface.default.hex}};
    
    /* Ensure text readability on the new background */
    --text-normal: {{colors.on_surface.default.hex}};
    --code-background: {{colors.surface_container_highest.default.hex}};
}

/* Force specific elements in Home to respect the new palette */
.home :is(h1, .HyperMD-header.HyperMD-header-1),
.home :is(h2, .HyperMD-header.HyperMD-header-2),
.home :is(h3, .HyperMD-header.HyperMD-header-3) {
   /* Allow the variables above to take effect */
   color: var(--highlight) !important;
}

.home :is(h4, .HyperMD-header.HyperMD-header-4) {
    background-color: var(--primary) !important;
    color: {{colors.on_tertiary.default.hex}} !important;
}

/* =================================================================
   SLEEP COUNTER (Abstract Callout)
   Integrated with Matugen colors for dynamic glowing effects
   ================================================================= */
.callout[data-callout="abstract"] {
    /* Obsidian internal variable (RGB format) -> Mapped to Primary */
    --callout-color: {{colors.primary.default.r}}, {{colors.primary.default.g}}, {{colors.primary.default.b}};

    /* Background: Primary Container (Pastel in Light, Muted in Dark) */
    background-color: {{colors.primary_container.default.hex}} !important;
    
    /* Border: Strong Primary Color */
    border: 1.5px solid {{colors.primary.default.hex}} !important;
    border-radius: 12px;
    
    /* THE GLOW EFFECT */
    /* We use 'shadow' mixed with 'primary' to ensure it looks good in both modes.
       In Dark Mode, this creates a nice colored bloom. */
    box-shadow: 0 0 20px color-mix(in srgb, {{colors.primary.default.hex}} 30%, {{colors.shadow.default.hex}});
    
    margin-bottom: 20px;
}

/* Icon Styling */
.callout[data-callout="abstract"] .callout-icon {
    /* Icon color matches the border */
    color: {{colors.primary.default.hex}};
    
    /* Subtle glow matching the accent color */
    filter: drop-shadow(0 0 5px {{colors.primary.default.hex}});
}
